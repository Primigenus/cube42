<head>
  <meta charset="utf-8">
  <title>The 42 Cube</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link href='http://fonts.googleapis.com/css?family=Monda:400,700' rel='stylesheet' type='text/css'>
</head>

<body>
  <header>
    {{> header}}
  </header>

  {{#if currentUser}}
    <p>Hello {{> currentUser}}!</p>
  {{/if}}

  {{> instructions}}

  {{> body}}
  {{> totals}}
  {{> message}}
</body>

<template name="header">
  <div id="level">Level {{currLevel}}</div>
  <div id="toggledCubes" title="Displays how many cubes you've toggled off.">
    {{#each toggledCubes}}
      <div class="toggledCube {{active}}"></div>
    {{/each}}
  </div>
</template>

<template name="message">
  {{#if hasMessage}}
    <div id="messageContainer">
      <div id="message">
        <div class="message">{{text}}</div>
      </div>
    </div>
  {{/if}}
</template>

<template name="loading">
  <div id="loading">
    <h1>
      <span class="the">the</span>
      <span class="cube-42">42</span>
      <span data-role="lettering" class="title">Cube</span>
    </h1>
    <h2>A 3d puzzle game</h2>
    <div data-role="play" class="button">
      Play
    </div>
    <div data-role="instructions" class="button">
      Instructions
    </div>
  </div>
</template>

<template name="instructions">
  <div id="instructions">
    <ol>
      <li>The 42 Cube is a large cube made of smaller cubes.</li>
      <li class="with-arrow">Each smaller cube has a number. When looking at one side of the larger cube, the sum of all visible numbers is shown at the bottom...</li>
      <li class="with-arrow">...here. The goal is to get these numbers to 42.</li>
      <li>Clicking or touching a small cube hides it, revealing the cube behind it, and...</li>
      <li class="with-arrow">...altering the total.</li>

      <li>Look at different sides of the cube by dragging, clicking numbers below or with the arrow keys. Toggle smaller cubes on and off until each number reads 42.</li>
      <li>In the first level, you only need to toggle one cube to solve the puzzle.</li>
      <li>After you successfully complete a level, cubes toggled during the previous level are permanently removed.</li>
      <li>Each level, you must toggle one more cube to solve the puzzle! So in level 2, you toggle two cubes, in level 3, three cubes, etc.</li>
      <li>The game keeps getting harder. Can you clean out all the cubes? Good luck!</li>
    </ol>
  </div>
</template>

<template name="body">
  {{> loading}}
  <section id="container">
    <div id="master-cube">
      <div class="layer" id="top">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
      <div class="layer" id="middle">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
      <div class="layer" id="bottom">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
    </div>
  </section>
</template>

<template name="totals">
  <div id="total">
    {{#each faces}}<span class="face {{face}} total-{{total}}">{{total}}</span>{{/each}}
  </div>
</template>

<template name="cube">
  <div class="cube">
    <figure class="front"><span></span></figure>
    <figure class="back"><span></span></figure>
    <figure class="right"><span></span></figure>
    <figure class="left"><span></span></figure>
    <figure class="top"><span></span></figure>
    <figure class="bottom"><span></span></figure>
  </div>
</template>