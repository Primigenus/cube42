<head>
  <meta charset="utf-8">
  <title>The 42 Cube</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link href='http://fonts.googleapis.com/css?family=Monda:400,700' rel='stylesheet' type='text/css'>
</head>

<body>

  {{> login}}

  <header>
    {{> header}}
  </header>

  {{> instructions}}

  {{> body}}
  {{> totals}}
  {{> message}}
</body>

<template name="header">
  <div id="level">Level {{currLevel}}-{{subLevel}}</div>
  <div id="toggledCubes" title="Displays how many cubes you've toggled off.">
    {{#each toggledCubes}}
      <div class="toggledCube {{active}}"></div>
    {{/each}}
  </div>
</template>

<template name="message">
  {{#if hasMessage}}
    <div id="messageContainer" class="{{loading}}">
      <div id="message">
        <div class="message">
          <div class="current-level">Level {{currLevel}}-{{subLevel}}</div>
          {{text}}
        </div>
      </div>
    </div>
  {{/if}}
</template>

<template name="start">
  <div id="start">
    {{> login}}
    <div id="welcome-screen">
      <h1>
        <span class="the">the</span>
        <span class="cube-42">42</span>
        <span data-role="lettering" class="title">Cube</span>
      </h1>
      <h2>A 3d puzzle game</h2>
      <div data-role="play" class="button">
        Play
      </div>
      <div data-role="instructions" class="button">
        Instructions
      </div>
    </div>
  </div>
</template>

<template name="gift">
  <div id="gift">
    <div class="button {{active}}" data-role="unlock-gift">Claim your Christmas gift!</div>
  </div>
</template>

<template name="login">
  <div id="login">
    {{#if currentUser}}
      {{> gift}}
    {{/if}}
    {{#unless currentUser}}
      <div id="gift"><div class="button">Sign in to claim your gift</div></div>
    {{/unless}}
    {{loginButtons}}
  </div>
</template>

<template name="instructions">
  <div id="instructions">
    <ol>
      <li>The 42 Cube is a large cube made of smaller cubes.</li>
      <li class="with-arrow">Each smaller cube has a number. The sum of the numbers you can see on each side is shown at the bottom...</li>
      <li class="with-arrow">...here. The goal is to get these numbers to 42.</li>
      <li>Clicking or touching a small cube hides it, revealing the cube behind it, and...</li>
      <li class="with-arrow">...altering the total. For instance, if you hide a 2 cube to reveal a 5 cube, the total will increase by 3.</li>

      <li>Drag or use the arrow keys to rotate the cube...</li>
      <li class="with-arrow">...or click these buttons to switch to the corresponding side.</li>
      <li>Christmas gifts unlock in level 3, and a bonus gift is available if you can beat level 4-2. Good luck!</li>
    </ol>
  </div>
</template>

<template name="body">
  {{> start}}
  <section id="container">
    <div id="master-cube">
      <div class="layer" id="top">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
      <div class="layer" id="middle">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
      <div class="layer" id="bottom">
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
        {{> cube}}
      </div>
    </div>
  </section>
</template>

<template name="totals">
  <div id="total">
    {{#each faces}}<span class="face {{face}} total-{{total}}">{{total}}</span>{{/each}}
  </div>
</template>

<template name="cube">
  <div class="cube">
    <figure class="front"><span></span></figure>
    <figure class="back"><span></span></figure>
    <figure class="right"><span></span></figure>
    <figure class="left"><span></span></figure>
    <figure class="top"><span></span></figure>
    <figure class="bottom"><span></span></figure>
  </div>
</template>